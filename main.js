(()=>{"use strict";var t,e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var a=n.getElementsByTagName("script");a.length&&(t=a[a.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();class n{constructor(t){var e;this._node=document.createElement(null!==(e=null==t?void 0:t.tag)&&void 0!==e?e:"div"),t&&Object.assign(this._node,t),(null==t?void 0:t.parent)&&t.parent.append(this._node)}set attribute(t){this.node.setAttribute(t[0],t[1])}get attributeId(){return this.node.getAttribute("id")}get node(){return this._node}get parent(){return this.node.parentElement}destroy(){this.node.remove()}removeChild(t){return this.node.removeChild(n.toNode(t))}clear(){this.node.replaceChildren()}get text(){return this.node.textContent}set text(t){this.node.textContent=t}get innerText(){return this.node.innerText}set innerText(t){this.node.innerText=t}setText(t){(null==t?void 0:t.includes("\n"))?this.innerText=t:this.text=t}get style(){return this.node.style}static toNode(t){return"string"==typeof t?document.createTextNode(t):t instanceof n?t.node:t}insert(t,e){this.node[t](...e.map(n.toNode))}before(...t){this.insert("before",t)}prepend(...t){this.insert("prepend",t)}append(...t){this.insert("append",t)}after(...t){this.insert("after",t)}get onclick(){return this.node.onclick}set onclick(t){this.node.onclick=t}get addEventListener(){return this.node.addEventListener.bind(this.node)}get classList(){return this.node.classList}replaceWith(...t){return this.node.replaceWith(...t.map(n.toNode))}}class a extends n{constructor(t,e){super(Object.assign(Object.assign({parent:t,className:"app main container"},e),{tag:"main"}))}}class i extends n{constructor(t){super(Object.assign(Object.assign({},t),{tag:"a"}))}}class s extends n{constructor(t){super(Object.assign(Object.assign({},t),{tag:"img"}))}get src(){return this.node.src}set src(t){this.node.src=t}get decode(){return this.node.decode.bind(this.node)}}!function(t){t.main="",t.garage="garage",t.race="race",t.winners="winners"}(t||(t={}));class r extends i{constructor(e){super({parent:e,className:"header__logo-container",onclick:()=>window.location.hash=t.main}),this.logoImg=new s({src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxMDI0IDQwOC45IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDI0IDQwOC45OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzNEN0ZDMTt9Cgkuc3Qxe2ZpbGw6IzMzOTFGRTt9Cgkuc3Qye2ZpbGw6IzU2NTY1Njt9Cjwvc3R5bGU+CjxnIGlkPSJYTUxJRF8zNTJfIj4KCTxwYXRoIGlkPSJYTUxJRF8zNjNfIiBjbGFzcz0ic3QwIiBkPSJNOTk2LjQsMzkzSDE5LjVjLTQuNywwLTguNS0zLjktOC41LTguNXMzLjgtOC41LDguNS04LjVoOTc2LjljNC43LDAsOC41LDMuOSw4LjUsOC41CgkJUzEwMDEuMSwzOTMsOTk2LjQsMzkzeiIvPgoJPHBhdGggaWQ9IlhNTElEXzM2Ml8iIGNsYXNzPSJzdDAiIGQ9Ik01MDcuNiwyNzAuOGMtMi42LDAtNS0xLjQtNi4zLTMuN2wtNzguNi0xNDYuOWMtMS44LTMuNC0wLjQtNy41LDMtOS4zCgkJYzMuNS0xLjcsNy44LTAuNCw5LjYsMi45bDc4LjYsMTQ2LjljMS44LDMuNCwwLjQsNy41LTMsOS4zQzUwOS44LDI3MC42LDUwOC43LDI3MC44LDUwNy42LDI3MC44eiIvPgoJPHBhdGggaWQ9IlhNTElEXzM2MV8iIGNsYXNzPSJzdDEiIGQ9Ik00MDguNCwzOTNoLTM4OWMtNS4yLDAtOS41LTQuMS05LjUtOS4yczQuMi05LjIsOS41LTkuMmgzODljMTguOSwwLDM2LTEwLjEsNDQuOC0yNi40CgkJTDU4Mi4zLDk5LjZjMTItMjIuNCwzNS42LTM2LjMsNjEuNi0zNi4zSDg4NWwtMzUuMy0zMS44Yy0zLjgtMy40LTQtOS4yLTAuNS0xM2MzLjYtMy43LDkuNS0zLjksMTMuNC0wLjVsNzAuNiw2My41SDY0My44CgkJYy0xOC45LDAtMzYsMTAuMS00NC44LDI2LjRMNDcwLDM1Ni43QzQ1OCwzNzkuMSw0MzQuNCwzOTMsNDA4LjQsMzkzeiIvPgoJPGcgaWQ9IlhNTElEXzM1OV8iPgoJCTxwYXRoIGlkPSJYTUxJRF8zNjBfIiBjbGFzcz0ic3QyIiBkPSJNMzAzLjgsMzQ1LjdjLTI2LjUsMC00OC42LTkuMS02NC0yNi4zYy0xMy4xLTE0LjgtMjAuNC0zNC40LTIwLjQtNTUuNAoJCQljMC0zLjgsMy4yLTYuOSw3LjEtNi45YzMuOSwwLDcuMSwzLjEsNy4xLDYuOWMwLDE3LjQsNi4yLDM0LjQsMTYuOSw0Ni40YzEyLjUsMTQuMSwzMC45LDIxLjUsNTMuMiwyMS41CgkJCWMyOS4xLDAsNDkuNi0xMC45LDYxLjEtMzIuNGM0LTcuNSw0LjctMTYuMSwyLTI0LjJjLTIuOC04LjItOC43LTE0LjktMTYuNy0xOC43TDI1MSwyMDguOWMtMTEuNy01LjYtMjAuNS0xNS44LTI0LjItMjcuOQoJCQljLTMuNy0xMi4xLTItMjUuMyw0LjYtMzYuMWMxOC40LTMwLjIsNTEuNy0zNi41LDc2LjQtMzYuNWMyMCwwLDM5LjksNy43LDU0LjcsMjEuMmMxMS43LDEwLjcsMjUuNSwyOS45LDI1LjUsNjAuNwoJCQljMCwzLjgtMy4yLDYuOS03LjEsNi45cy03LjEtMy4xLTcuMS02LjljMC00NC4yLTM0LTY4LjEtNjYtNjguMWMtMzAuNSwwLTUyLjEsMTAtNjQuMiwyOS44Yy00LjcsNy43LTUuOCwxNi42LTMuMiwyNS4yCgkJCWMyLjYsOC42LDguNiwxNS41LDE2LjksMTkuNWw5OS4xLDQ3LjhjMTEuNCw1LjUsMTkuOSwxNSwyMy45LDI2LjhjMy45LDExLjYsMi45LDIzLjktMi45LDM0LjcKCQkJQzM2Ny43LDMyNC4xLDM0Ny4xLDM0NS43LDMwMy44LDM0NS43eiIvPgoJPC9nPgoJPHBhdGggaWQ9IlhNTElEXzM1OF8iIGNsYXNzPSJzdDIiIGQ9Ik03ODMuNywxNDYuN2MtOC43LTE3LjQtMjcuMi0zOC4yLTY1LjktMzguMmMtNDEuMiwwLTY0LDE3LjQtNzUuNSwzMi4xCgkJYy0xLjQsMS43LTQuMiwzLjUtNC4yLDUuMnYtMzAuNWMwLTMuOC0zLjEtNi45LTctNi45cy03LDMuMS03LDYuOXYyMjMuNmMwLDMuOCwzLjEsNi45LDcsNi45czctMy4xLDctNi45VjE4OC42CgkJYzAtMTEsNC0yNS4xLDE1LjUtMzkuN2MxMy45LTE3LjcsMzUuNy0yNi43LDY0LjEtMjYuN2M1OS45LDAsNjEuNCw1OS4yLDYxLjQsNjEuN3YxNTQuOWMwLDMuOCwzLjEsNi45LDcsNi45czctMy4xLDctNi45VjE4My45CgkJQzc5MywxODMuMiw3OTIuOCwxNjUsNzgzLjcsMTQ2Ljd6Ii8+Cgk8ZyBpZD0iWE1MSURfMzU2XyI+CgkJPHBhdGggaWQ9IlhNTElEXzM1N18iIGNsYXNzPSJzdDIiIGQ9Ik05MTYuOCwzNDUuN2MtMzIuOCwwLTUyLjQtMTUuOS02My0yOS4yYy0xMy42LTE3LTE4LjYtMzctMTguNy00OS45bDAtNS4xCgkJCWMtMC4yLTIwLjQtMC40LTU0LjYsMC03Mi40YzAuMi04LjYsMi40LTMwLjksMTcuOC01MC42YzEwLjYtMTMuNSwzMC44LTI5LjYsNjcuMi0yOS42YzQxLjksMCw2Mi4zLDIyLjEsNzIuMSw0MC41CgkJCWMxMC4zLDE5LjYsMTAuOSwzOSwxMC45LDM5LjhjMC4xLDMuOC0zLDYuOS02LjksN2MtMy45LDAuMS03LjItMi45LTcuMi02LjdjLTAuMS0yLjgtMi42LTY2LjktNjguOC02Ni45CgkJCWMtMjQuNiwwLTQzLjQsOC4xLTU1LjksMjQuMWMtMTMuMywxNy0xNC44LDM2LjktMTQuOSw0Mi42Yy0wLjUsMTcuNi0wLjIsNTEuNywwLDcybDAsNS4xYzAuMSwxMC4yLDQuMiwyNy4yLDE1LjcsNDEuNgoJCQljOC43LDEwLjksMjQuOCwyMy45LDUxLjgsMjMuOWMyOC45LDAsNDkuNS05LjUsNjEuNC0yOC4xYzEwLTE1LjcsMTAuNy0zMy43LDEwLjctMzguOGMwLTMuOCwzLjItNi45LDcuMS02LjlzNy4xLDMuMSw3LjEsNi45CgkJCWMwLDcuNy0xLjMsMjcuNy0xMi44LDQ2Qzk3Mi4xLDMzOS42LDk0MC4zLDM0NS43LDkxNi44LDM0NS43eiIvPgoJPC9nPgoJPHBhdGggaWQ9IlhNTElEXzM1M18iIGNsYXNzPSJzdDIiIGQ9Ik0xNTIuNywxMzNjLTEzLjgtMTYuMS0zMy45LTI0LjYtNTktMjQuNmMtMjYuNiwwLTQ4LjUsNy44LTYzLjgsMjIuNmMtMi44LDIuNy0yLjcsNywwLjEsOS43CgkJYzIuOCwyLjcsNy4zLDIuNywxMC4xLDBjMTIuNy0xMi4zLDMwLjctMTguNiw1My43LTE4LjZjNDYuNywwLDYzLjEsMzMuMSw2My4xLDY0LjJ2Ny4zYy05LDQuNC0yNy45LDE1LjUtNjUsMTUuNQoJCWMtMjUuNCwwLTQ0LjgsNy01OS44LDIxLjVjLTI3LjgsMjctMTcsNzIuMSwyLjYsOTEuMWMxNS45LDE1LjUsMzYuOSwyNC4zLDU5LDI0LjNjMC4xLDAsMC4yLDAsMC4yLDBjMjEuNiwwLDQxLjktOC45LDU3LjItMjMuOQoJCWwwLjUtMS4xaDBjMi4xLDAsNS4zLTMuOCw1LjMtNi4xdjI0YzAsMy44LDIuNiw2LjksNi41LDYuOXM2LjUtMy4xLDYuNS02LjlWMTg2LjNDMTcwLDE2NS42LDE2NC40LDE0Ni42LDE1Mi43LDEzM3ogTTE0MC45LDMxMi40CgkJbDAsMC4zQzEyOC4zLDMyNSwxMTEuNywzMzIsOTQuMSwzMzJjLTAuMSwwLTAuMSwwLTAuMiwwYy0xOC4zLDAtMzUuNy03LjItNDktMjAuMWMtNy41LTcuMy0xMy4zLTIwLjQtMTQuOC0zMy4zCgkJYy0xLjItMTAuOC0wLjEtMjYuMiwxMi4zLTM4LjFjMTIuMi0xMS44LDI4LjItMTcuNSw0OS42LTE3LjVjMzEuOCwwLDU0LTcuNSw2NS0xMy41djU2LjRDMTU3LDI4Ni45LDE1Mi4yLDMwMS4zLDE0MC45LDMxMi40eiIvPgo8L2c+Cjwvc3ZnPgo=",parent:this.node,alt:"header__logo",className:"header__logo"})}}class o extends n{constructor(e){super({parent:e,className:"header__btns",tag:"div"}),this.race=new i({parent:this.node,className:"header__href",onclick:()=>window.location.hash=t.race,textContent:"Race"}),this.garage=new i({parent:this.node,className:"header__href",onclick:()=>window.location.hash=t.garage,textContent:"Garage"}),this.winners=new i({parent:this.node,className:"header__href",onclick:()=>window.location.hash=t.winners,textContent:"Winners"})}}class c extends n{constructor(t){super({parent:t,tag:"header",className:"header__wrapper unselectable"}),this.headerLogo=new r(this.node),this.headerBtns=new o(this.node)}}class d extends n{constructor(t){super({parent:t,tag:"header",className:"footer__wrapper"}),this.footerLogo=new n({className:"footer__school-logo unselectable",tag:"div",parent:this.node}),this.schoolHref=new i({className:"footer__href",parent:this.footerLogo,href:"https://rs.school/js/",target:"_blank",textContent:"RSSchool"}),this.productionYear=new n({className:"footer__year",textContent:"2023",parent:this}),this.gitHref=new i({className:"footer__href",href:"https://github.com/mskmee",target:"_blank",textContent:"@mskmee",parent:this})}}class l extends n{constructor(t){super(Object.assign(Object.assign({className:"section"},t),{tag:"section"}))}}class u{constructor(){this.pageIds=["main","404","winners","garage","race"]}createPageIndex(){const t=window.location.hash.split("#")[1];return void 0===t?"main":this.pageIds.includes(t)?t:"404"}}const h=e.p+"7a5bb1a67555aeec88cd.png";class g extends n{constructor(){var e;super({tag:"div",className:"main__wrapper"}),this.title=new n({tag:"h1",textContent:"Welcome to async race"}),this.img=new s({alt:"main__logo",width:450,height:350,src:h}),this.startBtn=new i({textContent:"Start Game",className:"main__href-start btn",onclick:()=>window.location.hash=t.race}),this.node.append(this.title.node,this.img.node,this.startBtn.node),null===(e=this.node.parentElement)||void 0===e||e.classList.add("flex-jc")}}const w=e.p+"83c1bc1337052fe46365.png";class p extends n{constructor(){super({tag:"div",className:"error__wrapper"}),this.img=new s({src:w,alt:"404__img",className:"error__icon"}),this.title=new n({tag:"h1",className:"error__text",textContent:"The page you are looking for does not exist or has been moved."}),this.btn=new i({textContent:"Go to Home Page",className:"error__btn btn",onclick:()=>window.location.hash=t.main}),this.node.append(this.img.node,this.title.node,this.btn.node)}}class L extends n{constructor(t,e,a,s){super({tag:"div",className:"pagination__wrapper"}),this.prevBtn=new i({className:"pagination__prev pagination__link",textContent:"←",onclick:()=>{this.currentPage--,this.render()},parent:this.node}),this.paginationText=new n({tag:"span",className:"pagination__text",parent:this.node}),this.nextBtn=new i({textContent:"→",className:"pagination__next pagination__link",onclick:()=>{this.currentPage++,this.render()},parent:this.node}),this.currentPage=null!=a?a:1,this.lastPage=s,this.nextBtn.addEventListener("click",e),this.prevBtn.addEventListener("click",t),this.render()}render(){1===this.currentPage?this.prevBtn.classList.add("pagination__link_deactivated"):this.prevBtn.classList.remove("pagination__link_deactivated"),this.currentPage===this.lastPage?this.nextBtn.classList.add("pagination__link_deactivated"):this.nextBtn.classList.remove("pagination__link_deactivated"),this.paginationText.node.textContent=`${this.currentPage} from ${this.lastPage}`}updateElement(t){this.lastPage!==t&&0!==t&&(this.lastPage=t,this.render())}}class M extends n{constructor(t){super({tag:"div",className:t})}createPagination(t,e,n,a){this.pagination=new L(t,e,n,a)}}var N;!function(t){t.wins="wins",t.id="id",t.time="time"}(N||(N={}));const m="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaGVhZF9fZmlsdGVyLWljb24iIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbD0iIzAwMDAwMCIgd2lkdGg9IjIwcHgiIGhlaWdodD0iMjBweCIgdmlld0JveD0iLTguNSAwIDMyIDMyIiB2ZXJzaW9uPSIxLjEiPjx0aXRsZT5hbmdsZS1kb3duPC90aXRsZT48cGF0aCBkPSJNNy4yOCAyMC4wNDBjLTAuMjQgMC0wLjQ0LTAuMDgwLTAuNi0wLjI0bC02LjQ0LTYuNDRjLTAuMzItMC4zMi0wLjMyLTAuODQgMC0xLjIgMC4zMi0wLjMyIDAuODQtMC4zMiAxLjIgMGw1Ljg0IDUuODQgNS44NC01Ljg0YzAuMzItMC4zMiAwLjg0LTAuMzIgMS4yIDAgMC4zMiAwLjMyIDAuMzIgMC44NCAwIDEuMmwtNi40NCA2LjQ0Yy0wLjE2IDAuMTYtMC40IDAuMjQtMC42IDAuMjR6Ii8+PC9zdmc+";class y extends n{constructor(t){super({tag:"table",className:"winners__table table"}),this.caption=new n({tag:"caption",className:"winners__title-count",textContent:"Winners",parent:this.node}),this.wins=new n({tag:"th",className:"wins head__col head__filter none",textContent:"Wins"}),this.arrowPageForId=new s({src:m,className:"head__filter-icon",alt:"filter-arrow"}),this.arrowPageForTime=new s({src:m,className:"head__filter-icon",alt:"filter-arrow"}),this.arrowPageForWins=new s({src:m,className:"head__filter-icon",alt:"filter-arrow"}),this.time=new n({tag:"th",className:"time head__col head__filter none",textContent:"Best time (seconds)"}),this.id=new n({tag:"th",className:"id head__col head__filter none",textContent:"ID"}),this.id.addEventListener("click",(e=>t(e))),this.wins.addEventListener("click",(e=>t(e))),this.time.addEventListener("click",(e=>t(e))),this.createHead(),this.setActiveFilter()}createHead(){const t=new n({tag:"thead",className:"table__head head"}),e=new n({tag:"tr",className:"head__row"}),a=new n({tag:"th",className:"head__col",textContent:"Number"}),i=new n({tag:"th",className:"head__col",textContent:"Car"}),s=new n({tag:"th",className:"head__col",textContent:"Name"});this.id.node.appendChild(this.arrowPageForId.node),this.wins.node.appendChild(this.arrowPageForWins.node),this.time.node.appendChild(this.arrowPageForTime.node),e.node.append(a.node,this.id.node,i.node,s.node,this.wins.node,this.time.node),t.node.append(e.node),this.node.append(t.node)}setActiveFilter(){const t=I.state.sortItem;if(t===N.time){const t=this.time.classList[this.time.classList.length-1];return this.time.classList.remove(t),this.time.classList.add(I.state.sortDirection)}if(t===N.id){const t=this.id.classList[this.id.classList.length-1];return this.id.classList.remove(t),this.id.classList.add(I.state.sortDirection)}if(t===N.wins){const t=this.wins.classList[this.wins.classList.length-1];this.wins.classList.remove(t),this.wins.classList.add(I.state.sortDirection)}}}const v="http://127.0.0.1:3000";class C extends n{constructor(){super({tag:"tr",className:"error table__error"}),this.errorMessage=new n({tag:"td",textContent:"Oops! We got error with taking data. Please check JSON server.",className:"table__error-message",parent:this.node}),this.errorMessage.node.setAttribute("colspan","7")}}const f=t=>{return e=void 0,n=void 0,i=function*(){try{const e=yield fetch(`${v}/garage/${t}`);return e.ok?yield e.json():"Oops! Check JSON Server. Error with get car"}catch(t){return`Oops! We got ${t}`}},new((a=void 0)||(a=Promise))((function(t,s){function r(t){try{c(i.next(t))}catch(t){s(t)}}function o(t){try{c(i.throw(t))}catch(t){s(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(r,o)}c((i=i.apply(e,n||[])).next())}));var e,n,a,i},j=t=>`\n  <svg class="car__icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" viewBox="0 0 100 100" y="0" x="0" id="圖層_1" version="1.1" width="40px" height="40px"><g class="ldl-scale"><path fill="${t}" d="M66 47.5c-.4-.5-5.1 0-5.7 0H22.9c-1.8 0-4.9.6-6.5 0 .8-2.5 3.4-3.9 5.7-5 6.5-3.1 13.3-5.7 20.3-7.6 10-2.8 16.1 2 22.5 11.1l1.1 1.5z"/>\n  <path fill="#333" d="M62.3 46.2c-5.6-7.9-10.9-12.1-19.6-9.7-1.5.4-3 .9-4.5 1.4-.9.3-1.5 1.1-1.5 2l-.3 5.2c-.1 1.3 1 2.4 2.3 2.4h19.7c.5 0 4.7-.4 5 0l-1.1-1.3z"/>\n  <path fill="#333" d="M25 43.2c-1.6.8-3.4 1.7-4.4 3.1-.4.6 0 1.4.7 1.4 1.4.1 3.1-.2 4.3-.2h8c.5 0 .9-.4.9-.9l.4-6.3c0-.7-.6-1.1-1.2-.9-3 1.2-5.9 2.4-8.7 3.8z"/>\n  <path class="car-body" fill="${t}" d="M89.4 54.1c-2.3-3.5-5.9-6.2-9.8-7.6-1.2-.4-2.5-.8-3.8-.9-11.8-.6-23.9 0-35.7 0h-23c-3 0-5.6 2.2-6.1 5.1 0 .1-.1.2-.1.3l-.5 3.8-.8 3.4c0 2.2 1.8 4 4 4H62.7c5.6 0 11.2.2 16.8 0 .6 0 1.2 0 1.8-.1 1.1 0 2.2-.1 3.2-.1 2.1-.1 6.5-.1 6.8-3 .1-.9-.2-1.8-.6-2.6-.4-.8-.8-1.6-1.3-2.3z"/>\n  <path fill="#e15b64" d="M14.2 50.7H11c-.2 0-.3.1-.3.3l-.4 3.3c0 .2.1.5.3.5h3.6c.9 0 1.6-.8 1.6-1.8v-.5c-.1-1-.8-1.8-1.6-1.8z"/>\n  <path fill="#e0e0e0" d="M87.9 51c-.2-.2-.5-.4-.8-.4h-3c-.8 0-1.4.5-1.4 1.1v1.5c0 .8.8 1.6 1.8 1.6h5c.6 0 .7-.5.4-1l-2-2.8z"/>\n  <path fill="#f8b26a" d="M90.3 57.8H9.6s-.4 0-.4.4c0 2.4 1.7 4 4.1 4h77c1.2 0 2.2-1 2.2-2.2 0-1.2-1-2.2-2.2-2.2z"/>\n  <g class="car-circle">\n  <circle fill="#fff" r="7.3" cy="57.2" cx="25.3"/>  \n  <path fill="#333" d="M25.3 51.3c3.2 0 5.8 2.6 5.8 5.8S28.5 63 25.3 63s-5.8-2.6-5.8-5.8 2.6-5.9 5.8-5.9m0-3c-4.9 0-8.8 3.9-8.8 8.8s3.9 8.8 8.8 8.8 8.8-3.9 8.8-8.8-4-8.8-8.8-8.8z" style="fill:rgb(51, 51, 51);"/>\n  </g>\n  <g class="car-circle">\n  <circle  class="car-circle" fill="#e6e6e6" r="4" cy="57.2" cx="25.3"/>\n  </g>\n  <g class="car-circle"><circle fill="#fff" r="7.3" cy="57.2" cx="71.9"/>\n  <path fill="#333" d="M71.9 51.3c3.2 0 5.8 2.6 5.8 5.8S75.1 63 71.9 63s-5.8-2.6-5.8-5.8 2.6-5.9 5.8-5.9m0-3c-4.9 0-8.8 3.9-8.8 8.8s3.9 8.8 8.8 8.8 8.8-3.9 8.8-8.8-3.9-8.8-8.8-8.8z"\n    <circle  class="car-circle" fill="#e6e6e6" r="4" cy="57.2" cx="25.3"/>\n</g>\n  <g class="car-circle"><circle fill="#e6e6e6" r="4" cy="57.2" cx="71.9" />\n  </g>\n  <path fill="#f8b26a" d="M59.1 55.9H41c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5h18c.8 0 1.5.7 1.5 1.5.1.8-.6 1.5-1.4 1.5z">\n  <path fill="${t}" d="M17 43l-7.2-.7c-1.1-.1-2-1-2.1-2.2l-.1-1.5c-.1-1 .9-1.8 1.9-1.5l10.2 3.3c0 1.5-1.3 2.7-2.7 2.6z">\n  <path d="M18.7 46.2l-2.9 2.5-4.9-8.1 1.9-1.6z" fill="${t}"/>\n  <metadata xmlns:d="https://loading.io/stock/"><d:name>sports car</d:name>\n  `;class x extends n{constructor(t,e,n,a,i,s){super({tag:"tr",className:"table__row"}),this.rowDataArr=[t,e,n,a,i,s],this.fillRow()}fillRow(){this.rowDataArr.forEach(((t,e)=>{if(2===e&&"string"==typeof t){const e=new n({tag:"td",className:"table__row-data",innerHTML:j(t)});this.node.append(e.node)}else{const e=new n({tag:"td",className:"table__row-data",textContent:`${t}`});this.node.append(e.node)}}))}}const _={none:"asc",asc:"desc",desc:"none"};var D=function(t,e,n,a){return new(n||(n=Promise))((function(i,s){function r(t){try{c(a.next(t))}catch(t){s(t)}}function o(t){try{c(a.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,o)}c((a=a.apply(t,e||[])).next())}))};class I extends M{constructor(){super("winners__wrapper"),this.table=new y((t=>{(t=>{const e=t.target;if(e instanceof Element){const t=e.classList[e.classList.length-1],n=e.classList[0];I.state.sortItem!==n&&(I.state.sortItem=n,I.state.sortDirection=t);const a=_[I.state.sortDirection];I.state.sortDirection=a,e.classList.add(a),e.classList.remove(t),e.classList.add(a)}})(t),this.createRows().then()})),this.paginationPrevOnClick=()=>{I.state.activePageNum--,this.createRows().then()},this.paginationNextOnClick=()=>{I.state.activePageNum++,this.createRows().then()},this.renderPage().then()}createRows(){return D(this,void 0,void 0,(function*(){const t=yield this.gatherWinnersData();if(t){const e=this.table.node.querySelectorAll("tr");if(e.length>1)for(let t=1;t<e.length;t++)e[t].remove();t.forEach(((t,e)=>{this.gatherCarInfo(t.id).then((n=>{const a=new x(e+1,t.id,n.color,n.name,t.wins,t.time);this.table.append(a.node)}))}))}}))}gatherWinnersData(){var t,e;return D(this,void 0,void 0,(function*(){const n=yield((t,e,n="",a="")=>{return i=void 0,s=void 0,o=function*(){try{const i=yield fetch(`${v}/winners?_page=${t}&_limit=${e}&_sort=${n}&_order=${a}`);return i.ok?{totalCount:+i.headers.get("x-total-count"),data:yield i.json()}:"Oops! Check JSON Server. Error with get winners"}catch(t){return`Oops! We got ${t}`}},new((r=void 0)||(r=Promise))((function(t,e){function n(t){try{c(o.next(t))}catch(t){e(t)}}function a(t){try{c(o.throw(t))}catch(t){e(t)}}function c(e){var i;e.done?t(e.value):(i=e.value,i instanceof r?i:new r((function(t){t(i)}))).then(n,a)}c((o=o.apply(i,s||[])).next())}));var i,s,r,o})(I.state.activePageNum,I.state.displayItems,I.state.sortItem,I.state.sortDirection);if("string"==typeof n){const t=new C;return this.table.append(t)}return I.state.lastPageNum=null!==(t=Math.ceil(n.totalCount/I.state.displayItems))&&void 0!==t?t:1,this.table.caption.node.textContent=`Winners (${n.totalCount})`,null===(e=this.pagination)||void 0===e||e.updateElement(I.state.lastPageNum),n.data}))}gatherCarInfo(t){return D(this,void 0,void 0,(function*(){const e=yield f(t);return"string"==typeof e?{name:"Error, check JSON server",color:"#FF0000",id:666}:e}))}createPagination(t,e,n,a){super.createPagination(t,e,n,a)}renderPage(){return D(this,void 0,void 0,(function*(){yield this.createRows().then((()=>{this.createPagination(this.paginationPrevOnClick,this.paginationNextOnClick,I.state.activePageNum,I.state.lastPageNum),this.node.append(this.table.node,this.pagination.node)}))}))}}I.state={sortItem:"",sortDirection:"none",displayItems:10,activePageNum:1,lastPageNum:1,totalCount:0};class T extends n{constructor(t){super(Object.assign(Object.assign({},t),{tag:"input"})),this.node.required=!0}get value(){return this.node.value}set value(t){this.node.value=t}}class z extends n{constructor(t){super(Object.assign(Object.assign({},t),{tag:"button"}))}get disabled(){return this.node.disabled}set disabled(t){this.node.disabled=t}click(){return this.node.click()}}const S={"Content-Type":"application/json"};var b;!function(t){t[t.engineBroken=500]="engineBroken",t[t.winnerExist=500]="winnerExist",t[t.objectCreated=201]="objectCreated"}(b||(b={}));const O=(t,e)=>{return n=void 0,a=void 0,s=function*(){const n={name:t,color:e};try{const t=yield fetch(`${v}/garage/`,{method:"POST",headers:S,body:JSON.stringify(n)});return t.ok&&t.status===b.objectCreated?yield t.json():"Oops! Check JSON Server. Error with create car"}catch(t){return`Oops! We got ${t}`}},new((i=void 0)||(i=Promise))((function(t,e){function r(t){try{c(s.next(t))}catch(t){e(t)}}function o(t){try{c(s.throw(t))}catch(t){e(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(r,o)}c((s=s.apply(n,a||[])).next())}));var n,a,i,s};var k;!function(t){t.success="success",t.warning="warning"}(k||(k={}));var E=function(t,e,n,a){return new(n||(n=Promise))((function(i,s){function r(t){try{c(a.next(t))}catch(t){s(t)}}function o(t){try{c(a.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,o)}c((a=a.apply(t,e||[])).next())}))};class P extends n{constructor(t,e){super({parent:t,tag:"form",className:"garage__car-add-form car-add__form"}),this.skipCars=0,this.carNameLabel=new n({tag:"label",textContent:"Car name:",parent:this.node}),this.carNameInput=new T({className:"car-add__name",type:"text",placeholder:"Enter car name",name:"car-name",parent:this.node,id:"car-name",value:U.state.newCarName}),this.carColorLabel=new n({parent:this.node,tag:"label",textContent:"Car color:"}),this.carColorInput=new T({type:"color",className:"car-add__color",name:"car-color",parent:this.node,id:"car-color",value:U.state.newCarColor}),this.addCarBtn=new z({parent:this.node,type:"submit",textContent:"Add",className:"car-add__add-btn btn"}),this.generate100Cars=new z({parent:this.node,type:"button",textContent:"Add 100 cars",className:"car-add__generate-btn btn",onclick:()=>{var t;this.generate100Cars.disabled=!0,(t=this.skipCars,E(void 0,void 0,void 0,(function*(){try{const e={"X-Parse-Application-Id":"ZlQJyoFKLeH8ulGAeVckevg3DOZWScu8v7FKHL3B","X-Parse-REST-API-Key":"BfcHpR6H1mcm6pGzLrqI3bvG05PfMPCjf5fGf2Fl"},n=yield fetch(`https://parseapi.back4app.com/classes/Carmodels_Car_Model_List?skip=${t}&excludeKeys=Category`,{headers:e}),a=yield n.json();return"string"==typeof a?"Oops! Error":(t=>E(void 0,void 0,void 0,(function*(){const e=[];(yield t).results.forEach((t=>{const n=`${t.Make} ${t.Model} ${t.Year} year`,a=Math.floor(16777215*Math.random()).toString(16);e.push(O(n,`#${a}`))})),Promise.all(e).then((t=>{t.some((t=>t===k.warning))}))})))(a)}catch(t){return`Oops! Error ${t}`}}))).then((()=>{this.skipCars+=100,this.generate100Cars.disabled=!1}))}}),this.node.addEventListener("submit",(t=>{t.preventDefault(),this.generateNewCar().then((()=>{this.carColorInput.value="#000000",this.carNameInput.value="",e().then()}))})),this.generate100Cars.addEventListener("click",(()=>{e().then()})),this.addListeners()}addListeners(){this.carNameInput.addEventListener("change",(()=>U.state.newCarName=this.carNameInput.value)),this.carColorInput.addEventListener("change",(()=>U.state.newCarColor=this.carColorInput.value))}generateNewCar(){return t=this,e=void 0,a=function*(){yield O(this.carNameInput.value,this.carColorInput.value)},new((n=void 0)||(n=Promise))((function(i,s){function r(t){try{c(a.next(t))}catch(t){s(t)}}function o(t){try{c(a.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,o)}c((a=a.apply(t,e||[])).next())}));var t,e,n,a}}function A(t,e,n,a){const i=Array.from(a.node.querySelectorAll(".car__item")),[s]=i.filter((e=>e.querySelector(".car__updates").getAttribute("data-id")===t));((t,e,n)=>{return a=void 0,i=void 0,r=function*(){const a={name:e,color:n};try{const e=yield fetch(`${v}/garage/${t}`,{method:"PUT",headers:S,body:JSON.stringify(a)});return e.ok?yield e.json():"Oops! Check JSON Server. Error with updateCar car"}catch(t){return`Oops! We got ${t}`}},new((s=void 0)||(s=Promise))((function(t,e){function n(t){try{c(r.next(t))}catch(t){e(t)}}function o(t){try{c(r.throw(t))}catch(t){e(t)}}function c(e){var a;e.done?t(e.value):(a=e.value,a instanceof s?a:new s((function(t){t(a)}))).then(n,o)}c((r=r.apply(a,i||[])).next())}));var a,i,s,r})(+t,e.value,n.value).then((()=>{s.querySelector(".car__name").textContent=e.value}))}function Q(t,e,n){const a=t.getAttribute("data-id");a&&(t=>{return e=void 0,n=void 0,i=function*(){try{const e=yield fetch(`${v}/garage/${t}`,{method:"DELETE"});return e.ok?yield e.json():"Oops! Check JSON Server. Error with delete car"}catch(t){return`Oops! We got ${t}`}},new((a=void 0)||(a=Promise))((function(t,s){function r(t){try{c(i.next(t))}catch(t){s(t)}}function o(t){try{c(i.throw(t))}catch(t){s(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(r,o)}c((i=i.apply(e,n||[])).next())}));var e,n,a,i})(+a).then((()=>{(t=>{return e=void 0,n=void 0,i=function*(){try{const e=yield fetch(`${v}/winners/${t}`,{method:"DELETE"});return e.ok?yield e.json():"Oops! Check JSON Server. Error with delete winner"}catch(t){return`Oops! We got ${t}`}},new((a=void 0)||(a=Promise))((function(t,s){function r(t){try{c(i.next(t))}catch(t){s(t)}}function o(t){try{c(i.throw(t))}catch(t){s(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(r,o)}c((i=i.apply(e,n||[])).next())}));var e,n,a,i})(+a).then(),e().then(),n.node.classList.add("garage__cars-container_disable")}))}class Y extends n{constructor(t,e){super({parent:t,tag:"div",className:"garage__container"}),this.garageCarItemsContainer=new n({tag:"div",className:"garage__cars list__cars",parent:this.node}),this.garageModelContainer=new n({tag:"div",className:"garage__cars-container",parent:this.node}),this.garageCarTitle=new n({tag:"h3",className:"garage__car-mode-title",textContent:U.state.activeCarName,parent:this.garageModelContainer}),this.garageModelHolder=new n({tag:"div",className:"garage__car-mode-holder",parent:this.garageModelContainer,innerHTML:j(U.state.activeCarColor)}),this.addListeners(e)}addListeners(t){this.garageCarItemsContainer.addEventListener("click",(e=>{const n=e.target;if(n instanceof Element){const e=n.closest(".car__delete-btn"),a=n.closest(".car__item"),i=n.closest(".car__update-btn");if(a){const[n,s,r]=function(t){const e=t.querySelector(".car__updates").getAttribute("data-id"),n=t.querySelector(".car-add__color"),a=t.querySelector(".car-add__name");return U.state.activeCar=+e,U.state.activeCarColor=n.value,U.state.activeCarName=a.value,[e,n,a]}(a);this.garageModelContainer.node.classList.remove("garage__cars-container_disable"),function(t,e,n,a){Array.from(e.node.querySelectorAll(".car__item")).forEach((t=>t.classList.remove("car__item_active"))),t.classList.add("car__item_active");const i=t.querySelector(".car__name").textContent,s=t.querySelector(".car-add__color");if(s instanceof HTMLInputElement){const t=s.value;n.node.innerHTML=j(t),a.node.textContent=i}}(a,this.garageCarItemsContainer,this.garageModelHolder,this.garageCarTitle),i&&A(n,r,s,this.garageCarItemsContainer),e&&Q(e,t,this.garageModelContainer)}}}))}createCarsList(t){this.garageCarItemsContainer.clear(),t.data.forEach((t=>{const e=(t=>{const e=new n({tag:"div",className:"car__item"}),a=new n({tag:"form",className:"car__updates",parent:e}),i=(new n({tag:"h3",textContent:`${t.name}`,className:"car__name",parent:a}),new n({tag:"label",textContent:"Car name",parent:a}),new T({tag:"input",className:"car-add__name",type:"text",value:`${t.name}`,parent:a}),new n({tag:"label",textContent:"Car color",parent:a}),new T({tag:"input",value:`${t.color}`,type:"color",className:"car-add__color",parent:a}),new z({className:"car__update-btn btn",type:"submit",textContent:"Update",parent:a})),s=new z({className:"car__delete-btn btn",type:"button",textContent:"Delete",parent:a});return a.attribute=["data-id",`${t.id}`],i.attribute=["data-id",`${t.id}`],s.attribute=["data-id",`${t.id}`],t.id===U.state.activeCar&&e.classList.add("car__item_active"),e})(t);this.garageCarItemsContainer.node.append(e.node)}))}}const J=(t,e)=>{return n=void 0,a=void 0,s=function*(){try{const n=yield fetch(`${v}/garage?_page=${t}&_limit=${e}`);return n.ok?{totalCount:+n.headers.get("x-total-count"),data:yield n.json()}:"Oops! Check JSON Server. Error with get cars"}catch(t){return`Oops! We got ${t}`}},new((i=void 0)||(i=Promise))((function(t,e){function r(t){try{c(s.next(t))}catch(t){e(t)}}function o(t){try{c(s.throw(t))}catch(t){e(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(r,o)}c((s=s.apply(n,a||[])).next())}));var n,a,i,s};var $,W=function(t,e,n,a){return new(n||(n=Promise))((function(i,s){function r(t){try{c(a.next(t))}catch(t){s(t)}}function o(t){try{c(a.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,o)}c((a=a.apply(t,e||[])).next())}))};class U extends M{constructor(){super("garage__wrapper"),this.gatherData=()=>W(this,void 0,void 0,(function*(){var t,e;try{const n=yield J(U.state.activePageNum,U.state.displayItems);if("string"==typeof n)return;U.state.totalCount=n.totalCount,U.state.lastPageNum=null!==(t=Math.ceil(n.totalCount/U.state.displayItems))&&void 0!==t?t:1,this.title.node.textContent=`Garage (${U.state.totalCount})`,this.carsList.createCarsList(n),null===(e=this.pagination)||void 0===e||e.updateElement(U.state.lastPageNum)}catch(t){return}})),this.garageContainer=new n({tag:"div",className:"garage__cars-wrapper",parent:this.node}),this.title=new n({tag:"h1",className:"garage__title-count",textContent:"Garage",parent:this.garageContainer}),this.addCarForm=new P(this.garageContainer.node,this.gatherData),this.carsList=new Y(this.garageContainer.node,this.gatherData),this.paginationPrevOnClick=()=>{U.state.activePageNum--,this.gatherData().then()},this.paginationNextOnClick=()=>{U.state.activePageNum++,this.gatherData().then()},this.renderPage().then()}createPagination(t,e,n,a){super.createPagination(t,e,n,a)}renderPage(){return W(this,void 0,void 0,(function*(){yield this.gatherData(),this.createPagination(this.paginationPrevOnClick,this.paginationNextOnClick,U.state.activePageNum,U.state.lastPageNum),this.node.append(this.pagination.node)}))}}U.state={totalCount:0,activePageNum:1,lastPageNum:0,displayItems:7,activeCar:1,newCarColor:"",newCarName:"",activeCarName:"",activeCarColor:""},function(t){t.stop="stopped",t.start="started",t.drive="drive"}($||($={}));const B=t=>{return e=void 0,n=void 0,i=function*(){try{const e=yield fetch(`${v}/engine?id=${t}&status=${$.start}`,{method:"PATCH"});return e.ok?yield e.json():"Oops! Check JSON Server. Error with start engine"}catch(t){return`Oops! We got ${t}`}},new((a=void 0)||(a=Promise))((function(t,s){function r(t){try{c(i.next(t))}catch(t){s(t)}}function o(t){try{c(i.throw(t))}catch(t){s(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(r,o)}c((i=i.apply(e,n||[])).next())}));var e,n,a,i};const G=t=>{return e=void 0,n=void 0,i=function*(){try{const e=yield fetch(`${v}/engine?id=${t}&status=${$.stop}`,{method:"PATCH"});return e.ok?yield e.json():"Oops! Check JSON Server. Error with stop engine"}catch(t){return`Oops! We got ${t}`}},new((a=void 0)||(a=Promise))((function(t,s){function r(t){try{c(i.next(t))}catch(t){s(t)}}function o(t){try{c(i.throw(t))}catch(t){s(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(r,o)}c((i=i.apply(e,n||[])).next())}));var e,n,a,i};const H=(t,e,n,a,i)=>{return s=void 0,r=void 0,c=function*(){const s=yield B(t);if("string"==typeof s)return"err";const r=Math.round(s.distance/s.velocity),o=function(t,e,n,a,i,s){const r=t.animate([{transform:"translateX(0)"},{transform:`translateX(${e}px)`}],{duration:n});return tt.state.animationsArr.push(r),r.id=`${s}`,r.onfinish=()=>{t.style.transform=`translateX(${e}px)`,a.disabled=!1,i.disabled=!0},r.oncancel=()=>t.style.transform="translateX(0)",r}(e,i,r,n,a,t);!function(t,e,n,a,i){t.addEventListener("click",(()=>((t,e,n,a,i)=>{t.disabled=!0,e.disabled=!1,n.cancel(),G(a).then((()=>i.style.transform="translateX(0)"))})(t,e,n,a,i)))}(a,n,o,t,e);const c=yield(t=>{return e=void 0,n=void 0,i=function*(){try{const e=yield fetch(`${v}/engine?id=${t}&status=${$.drive}`,{method:"PATCH"});return e.ok?yield e.json():e.status===b.engineBroken?{broken:!0}:"Oops! Check JSON Server. Error with drive car"}catch(t){return`Oops! We got ${t}`}},new((a=void 0)||(a=Promise))((function(t,s){function r(t){try{c(i.next(t))}catch(t){s(t)}}function o(t){try{c(i.throw(t))}catch(t){s(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(r,o)}c((i=i.apply(e,n||[])).next())}));var e,n,a,i})(t);return"string"==typeof c?"err":(c.broken&&o.pause(),o)},new((o=void 0)||(o=Promise))((function(t,e){function n(t){try{i(c.next(t))}catch(t){e(t)}}function a(t){try{i(c.throw(t))}catch(t){e(t)}}function i(e){var i;e.done?t(e.value):(i=e.value,i instanceof o?i:new o((function(t){t(i)}))).then(n,a)}i((c=c.apply(s,r||[])).next())}));var s,r,o,c};const R=(t,e)=>{return n=void 0,a=void 0,s=function*(){const n={id:t,wins:1,time:e};try{const a=yield fetch(`${v}/winners`,{method:"POST",headers:S,body:JSON.stringify(n)});if(a.ok&&a.status===b.objectCreated)return yield a.json();if(a.status===b.winnerExist){const n=yield(t=>{return e=void 0,n=void 0,i=function*(){try{const e=yield fetch(`${v}/winners/${t}`);return e.ok?yield e.json():"Oops! Check JSON Server. Error with get winner"}catch(t){return`Oops! We got ${t}`}},new((a=void 0)||(a=Promise))((function(t,s){function r(t){try{c(i.next(t))}catch(t){s(t)}}function o(t){try{c(i.throw(t))}catch(t){s(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(r,o)}c((i=i.apply(e,n||[])).next())}));var e,n,a,i})(t);if("string"==typeof n)throw Error;const a=n.time>e?e:n.time,i=++n.wins,s=yield((t,e,n)=>{return a=void 0,i=void 0,r=function*(){const a={wins:e,time:n};try{const e=yield fetch(`${v}/winners/${t}`,{method:"PUT",headers:S,body:JSON.stringify(a)});return e.ok?yield e.json():"Oops! Check JSON Server. Error with update winner"}catch(t){return`Oops! We got ${t}`}},new((s=void 0)||(s=Promise))((function(t,e){function n(t){try{c(r.next(t))}catch(t){e(t)}}function o(t){try{c(r.throw(t))}catch(t){e(t)}}function c(e){var a;e.done?t(e.value):(a=e.value,a instanceof s?a:new s((function(t){t(a)}))).then(n,o)}c((r=r.apply(a,i||[])).next())}));var a,i,s,r})(t,i,a);return s}return"Oops! Check JSON Server. Error with create winner"}catch(t){return`Oops! We got ${t}`}},new((i=void 0)||(i=Promise))((function(t,e){function r(t){try{c(s.next(t))}catch(t){e(t)}}function o(t){try{c(s.throw(t))}catch(t){e(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(r,o)}c((s=s.apply(n,a||[])).next())}));var n,a,i,s};var Z=function(t,e,n,a){return new(n||(n=Promise))((function(i,s){function r(t){try{c(a.next(t))}catch(t){s(t)}}function o(t){try{c(a.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,o)}c((a=a.apply(t,e||[])).next())}))};const F=(t,e)=>Z(void 0,void 0,void 0,(function*(){const a=tt.state.raceMembers.map((t=>B(t.id)));yield Promise.all(a),tt.state.raceMembers.map((a=>Z(void 0,void 0,void 0,(function*(){a.startBtn.disabled=!0,a.stopBtn.disabled=!1;const i=a.hr.clientWidth-a.model.clientWidth+50;if(yield H(a.id,a.model,a.startBtn,a.stopBtn,i),t.addEventListener("click",(()=>X(t,e))),t.disabled=!1,tt.state.animationsArr.length===tt.state.raceMembers.length&&tt.state.isRace){tt.state.isRace=!1;const t=yield Promise.race(tt.state.animationsArr.map((t=>t.finished))),e=t.currentTime/1e3;yield(d=+t.id,l=e,s=void 0,r=void 0,o=void 0,c=function*(){const t=yield f(d);if("string"==typeof t)return;const e=new n({tag:"div",className:"pop-up unselectable"}),a=new n({tag:"div",className:"pop-up__container",parent:e});new n({tag:"h2",className:"pop-up__title",parent:a,textContent:`Winner is ${t.name}! His time is ${l}s`}),new n({tag:"div",className:"pop-up__car-wrapper",innerHTML:j(t.color),parent:a}),e.addEventListener("click",(()=>e.destroy())),document.body.append(e.node)},new(o||(o=Promise))((function(t,e){function n(t){try{i(c.next(t))}catch(t){e(t)}}function a(t){try{i(c.throw(t))}catch(t){e(t)}}function i(e){var i;e.done?t(e.value):(i=e.value,i instanceof o?i:new o((function(t){t(i)}))).then(n,a)}i((c=c.apply(s,r||[])).next())}))),yield R(+t.id,e)}var s,r,o,c,d,l}))))})),X=(t,e)=>Z(void 0,void 0,void 0,(function*(){const n=document.querySelectorAll(".car__icon");tt.state.raceMembers.forEach((t=>G(t.id)));for(const t of n)t.getAnimations().forEach((t=>t.cancel()));e.disabled=!1,t.disabled=!0}));class V extends n{constructor(t,e){super({parent:t,tag:"div",className:"race-control"}),this.title=new n({parent:this.node,tag:"h1",textContent:"Race"}),this.startRaceBtn=new z({className:"race-control__btn btn race-control__start",parent:this.node,textContent:"Start Race",disabled:!1}),this.stopRaceBtn=new z({className:"race-control__btn btn race-control__break",parent:this.node,textContent:"Stop Race",disabled:!0}),this.startRaceBtn.addEventListener("click",(t=>((t,e,n)=>Z(void 0,void 0,void 0,(function*(){const a=t.target;a.disabled=!0,tt.state.isRace=!0,tt.state.animationsArr=[],tt.state.raceMembers=(t=>{const e=[];return t.node.querySelectorAll(".car-item").forEach((t=>{const n=+t.id,a=t.querySelector(".car__icon"),i=t.querySelector(".car-item__engage"),s=t.querySelector(".car-item__break"),r=t.querySelector("hr");e.push({id:n,model:a,stopBtn:s,startBtn:i,hr:r})})),e})(n),F(e,a).then()})))(t,this.stopRaceBtn,e)))}}class q extends n{constructor(){super({tag:"div",className:"race__field"})}createCarTrack(t){this.clear(),t.data.forEach((t=>{const e=new n({tag:"div",className:`race__car-item car-item car-item-${t.id}`,id:`${t.id}`,parent:this.node}),a=(new n({tag:"h3",className:"car-item__name",textContent:t.name,parent:e}),new n({tag:"div",className:"car-item__icon-wrapper",parent:e})),i=new n({tag:"form",className:"car-item__form",parent:a}),s=new z({className:"car-item__engage btn car-item__btn",parent:i,textContent:"A",disabled:!1,type:"button",id:`${t.id}`}),r=new z({className:"car-item__break btn car-item__btn",parent:i,textContent:"B",disabled:!0,type:"button",id:`${t.id}`}),o=new n({tag:"div",className:"car__model-wrapper",parent:a,innerHTML:j(t.color)}),c=new n({tag:"hr",className:"car-item__road",parent:e}),d=o.node.querySelector(".car__icon");s.addEventListener("click",(()=>{r.disabled=!1,s.disabled=!0;const e=c.node.clientWidth-d.clientWidth+50;H(t.id,d,s.node,r.node,e).then()}))}))}}var K=function(t,e,n,a){return new(n||(n=Promise))((function(i,s){function r(t){try{c(a.next(t))}catch(t){s(t)}}function o(t){try{c(a.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,o)}c((a=a.apply(t,e||[])).next())}))};class tt extends M{constructor(){super("race__wrapper"),this.gatherData=()=>K(this,void 0,void 0,(function*(){var t,e;const n=yield J(tt.state.activePageNum,tt.state.displayItems);"string"!=typeof n&&(tt.state.totalCount=n.totalCount,tt.state.lastPageNum=null!==(t=Math.ceil(n.totalCount/tt.state.displayItems))&&void 0!==t?t:1,this.controlContainer.title.innerText=`Race (${tt.state.totalCount})`,this.raceField.createCarTrack(n),null===(e=this.pagination)||void 0===e||e.updateElement(tt.state.lastPageNum))})),this.raceField=new q,this.controlContainer=new V(this.node,this.raceField),this.paginationPrevOnClick=()=>{tt.state.activePageNum--,this.gatherData().then()},this.paginationNextOnClick=()=>{tt.state.activePageNum++,this.gatherData().then()},this.node.append(this.raceField.node),this.render().then()}createPagination(t,e,n,a){super.createPagination(t,e,n,a)}render(){return K(this,void 0,void 0,(function*(){this.gatherData().then(),this.createPagination(this.paginationPrevOnClick,this.paginationNextOnClick,tt.state.activePageNum,tt.state.lastPageNum),this.node.append(this.pagination.node)}))}}tt.state={totalCount:1,lastPageNum:1,activePageNum:1,displayItems:7,isRace:!1,animationsArr:[],raceMembers:[]},new class extends a{constructor(t){super(t,{className:"wrapper container"}),this.header=new c(this.node),this.app=new l({className:"main container unselectable",parent:this.node}),this.footer=new d(this.node),this.router=new u,this.pageIds={main:new g,race:new tt,404:new p},this.events()}createMainPage(t){var e;switch(null===(e=this.page)||void 0===e||e.destroy(),t){case"main":case"404":case"race":this.page=this.pageIds[t];break;case"winners":this.page=new I;break;case"garage":this.page=new U}this.page&&this.app.node.append(this.page.node)}events(){window.addEventListener("load",(()=>this.createMainPage(this.router.createPageIndex()))),window.addEventListener("hashchange",(()=>this.createMainPage(this.router.createPageIndex())))}run(){this.events()}}(document.body)})();